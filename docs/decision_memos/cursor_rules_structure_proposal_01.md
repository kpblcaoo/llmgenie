# Записка: Предложение по структуре каталогов для .cursor/rules в Cursor IDE

---

## 1. Предлагаемая структура каталогов

```
.cursor/rules/
  core/
    001_branch_policy.mdc
    002_session_management.mdc
  workflows/
    100_code_review.mdc
    110_docs.mdc
    120_onboarding.mdc
  roles/
    200_librarian.mdc
    210_reviewer.mdc
    220_devops.mdc
  languages/
    300_python.mdc
    310_typescript.mdc
  security/
    400_audit.mdc
    410_compliance.mdc
  templates/
    900_template_commit.mdc
    910_template_docs.mdc
```

---

## 2. Best practices
- Использовать префиксы и нумерацию для порядка и приоритета (core, workflows, roles, languages, security, templates).
- В каждом каталоге — только .mdc-файлы с корректным frontmatter (description, globs, alwaysApply).
- Для agent requested — чёткие, лаконичные descriptions.
- Для auto attached — globs, для always — alwaysApply: true.
- Документировать структуру в ONBOARDING и project_state.json.
- Регулярно ревизировать и избегать дублирования между каталогами.

---

## 3. Плюсы
- Масштабируемость для больших проектов и команд.
- Лёгкая ревизия и поддержка.
- Гибкость для agent requested и auto attached правил.
- Быстрое добавление новых сценариев/ролей без захламления корня.

## 4. Минусы/ограничения
- Возможны конфликты между правилами в разных папках (важно ревизировать).
- Не все старые версии Cursor корректно видят вложенные правила (использовать актуальную версию).
- Требует дисциплины в именовании и поддержке структуры.

---

## 5. Вопросы для обсуждения
1. Какие каталоги и сценарии нужны именно для нашего проекта? (core, workflows, roles, languages, security, templates — все или часть?)
2. Как структурировать ролевые и workflow-правила: по ролям, по сценариям, по компонентам?
3. Какие правила должны быть agent requested, какие — always, какие — auto attached?
4. Как документировать структуру для новых участников?
5. Как ревизировать и поддерживать структуру при росте проекта?
6. Какие naming conventions и префиксы использовать?
7. Как интегрировать с onboarding и project_state.json?

---

_Проверь и прокомментируй схему, ответь на вопросы или предложи свои варианты. После согласования — реализуем структуру и обновим документацию._ 


напоминалка о принципаъ работы 
### Механизмы работы `.cursor/rules` в Cursor IDE

**Суть**: `.cursor/rules` — файлы конфигурации, задающие инструкции для ИИ, обеспечивая контекст и стандарты для проекта или глобально.

**Механизм**:
- Правила добавляются в начало запросов к ИИ, влияя на его поведение.
- Хранятся в `.cursor/rules` (проект) или настройках Cursor (глобально).
- Поддерживают автоматизацию задач, стандартизацию кода и адаптацию ИИ.

**Типы вызовов**:
1. **Always (Всегда)**: Применяются ко всем взаимодействиям (`alwaysApply: true`).
2. **Auto Attached (Авто)**: Активируются по шаблонам файлов (`globs: ["*.py"]`, `alwaysApply: false`).
3. **Agent Requested (По запросу ИИ)**: ИИ запрашивает правило по описанию (`description: "..."`).
4. **Manual (Ручной)**: Указывается явно через `@ruleName`.

**Использование**:
- **Проектные правила**: В `.cursor/rules` для специфичных задач (например, Django-стандарты).
- **Глобальные правила**: В настройках для общих предпочтений (например, стиль ответа).
- Автоматизация: генерация шаблонов, сообщений коммитов.

**Примеры**:
1. **Django Best Practices**:
   ```yaml
   name: django_best_practices
   globs: ["*.py"]
   alwaysApply: false
   description: "Следуй Django ORM и MVC."
   content: "Используй Django ORM для запросов, избегай raw SQL."
   ```
   *Вызов*: Авто для `.py`-файлов.

2. **Global Tone**:
   ```yaml
   name: formal_tone
   alwaysApply: true
   content: "Отвечай формально и профессионально."
   ```
   *Вызов*: Применяется всегда.

**Источник**: [Документация Cursor](https://docs.cursor.com/context/rules)