# Decision Memo: Внедрение интеграционной базы знаний (integration knowledge base)

**Дата:** 2024-06-12
**Автор:** ai_assistant

## Цели
- Исключить дублирование и путаницу при внедрении интеграций и логики для разных сред/моделей.
- Обеспечить прозрачность, автоматизацию и LLM-friendly формат для всех возможностей.

## Структура
- Для каждой среды/модели — отдельные integration.md и integration.json (описание поддерживаемых протоколов, способов реализации логики, внедрённых возможностей, ограничений, несовместимостей, истории изменений).
- Общий integration_matrix (md/json) — сводная таблица по всем возможностям и интеграциям.

## Workflow
- При внедрении новой интеграции — обновлять integration.json и integration_matrix.
- В каждом integration.json вести history (дата, автор, описание изменений).
- Явно фиксировать несовместимости и ограничения.
- AI/CLI должен напоминать о ревизии и актуальности базы знаний.
- При создании новой задачи на интеграцию — автоматически создавать draft в integration.json.
- Документировать workflow обновления и ответственных.

## Риски и предложения
- Риск избыточности — решается регулярной ревизией и автоматизацией напоминаний.
- Возможна рассинхронизация с реальным кодом — решается связкой с задачами и ревизией.
- Для новых участников — добавить гайд по навигации и обновлению базы знаний.
- В будущем — реализовать визуализацию/дашборд по всем возможностям.

## Рекомендации
- Начать внедрение с Cursor, Ollama, VSCode, Copilot, API моделей, основных моделей.
- Вести changelog и incompatibilities в каждом integration.json.
- Регулярно ревизировать и обновлять integration_matrix.
- Документировать все новые best practices и workflow в knowledge/common.md.

## Integration Matrix (2024-06-12, ревизия 2025-06-12)

| Среда/Модель | rules | cli | api | mcp | lsp | toolspec | Особенности логики |
|--------------|-------|-----|-----|-----|-----|----------|--------------------|
| Cursor       |  +    |  -  |  -  |  -  |  -  |    -     | .cursor/rules, agent rule, no cli/api |
| Ollama       |  -    |  +  |  +  |  -  |  -  |    -     | API (OpenAI-compatible), CLI |
| VSCode       |  -    |  -  |  -  |  +  |  +  |   (+)    | LSP/ToolSpec via plugins, MCP agent mode |
| Copilot      |  -    |  -  |  -  |  +* |  -  |    -     | MCP через VSCode agent mode |
| API models   |  -    |  -  |  +  |  -  |  -  |    -     | API only |

- + поддерживается, - не поддерживается, (+) — частично/через плагины, +* — только как часть VSCode agent mode
- MCP — основной стандарт интеграции для VSCode (и Copilot через VSCode agent mode), в остальных — не поддерживается
- LSP и ToolSpec — только для VSCode (через плагины/расширения)
- OpenCtx — экспериментальный протокол, массово не поддерживается, см. https://openctx.org/
- Официальный список клиентов MCP: https://modelcontextprotocol.io/clients

_Подробности — см. integration.md/json для каждой среды/модели_

## Актуальные стандарты интеграции
- MCP — основной открытый стандарт для интеграции инструментов и внешних сервисов с LLM в VSCode и новых IDE.
- LSP — стандарт для языковых серверов, не для AI-интеграций.
- ToolSpec — часть tooling в MCP/VSCode, не отдельный массовый стандарт.
- OpenCtx — экспериментальная надстройка, массово не поддерживается.

## TODO
- Ревизия интеграционной матрицы раз в квартал
- Следить за развитием MCP, LSP, ToolSpec, OpenCtx
- Обновлять knowledge/common.md при появлении новых стандартов 