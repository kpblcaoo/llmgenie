# Записка: Переосмысление схемы project rules с учётом Agent Requested в Cursor IDE

---

## 1. Что такое Agent Requested
- Agent Requested — тип project rule, который не всегда включается в контекст, а подгружается AI по описанию (description) и релевантности к текущей задаче.
- В .mdc-файле: 
  ```
  ---
  description: When reviewing code, enforce our code review checklist
  alwaysApply: false
  ---
  # Code Review Checklist
  ...
  ```
- Работает как "умная" подсказка: если задача/чат релевантны описанию, AI сам решает подгрузить правило.

## 2. Новые возможности для схемы правил
- Можно создавать гибридные правила, которые не "засоряют" контекст всегда, а подгружаются только по необходимости.
- Можно делать более узкие, ситуативные правила (например, для ревью, тестирования, деплоя, документации), не перегружая alwaysApply.
- Можно использовать agent requested для ролей: при смене роли AI может сам подгружать нужные правила по описанию.
- Можно комбинировать: alwaysApply для базовых стандартов, globs для файловых паттернов, agent requested для ситуативных сценариев.

## 3. Примеры гибридных сценариев
- **Code Review:**
  - description: When reviewing code, enforce our code review checklist
  - AI подгружает правило только при ревью.
- **Documentation:**
  - description: When writing docs, follow our documentation standards
  - Активируется только при работе с документацией.
- **Security Audit:**
  - description: When performing a security audit, apply the security checklist
  - Не мешает в обычной работе, но всегда доступно для аудита.

## 4. Плюсы и минусы
**Плюсы:**
- Меньше "шума" в контексте, только релевантные правила.
- Гибкость: можно покрыть больше сценариев без alwaysApply.
- Легче поддерживать и расширять правила.

**Минусы/ограничения:**
- AI может не всегда корректно определять релевантность (особенно если описание слишком общее).
- Требует чётких, лаконичных description для agent requested.
- Не все пользователи понимают, когда правило сработает (важно документировать).

## 5. Рекомендации для нашей схемы
- Для базовых стандартов (branch policy, session management) — использовать alwaysApply.
- Для файловых паттернов (workflow_modes, языковые стандарты) — использовать globs.
- Для ситуативных, ролевых, узких сценариев — использовать agent requested с чётким description.
- В документации и onboarding добавить раздел "Как писать agent requested правила" с примерами.
- Регулярно ревизировать правила: не дублируются ли они, не слишком ли общие descriptions.

---

_Эта записка — основа для гибридной, масштабируемой и удобной схемы project rules в Cursor IDE. После обсуждения — можно приступить к внедрению agent requested правил и обновлению документации._ 