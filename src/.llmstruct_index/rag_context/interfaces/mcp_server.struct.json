{
  "module_id": "rag_context.interfaces.mcp_server",
  "path": "rag_context/interfaces/mcp_server.py",
  "category": "core",
  "module_doc": "MCP Server для интеграции с Cursor, VSCode, Claude Desktop\nОбъединяет RAG (5 инструментов) + Struct Tools (6 инструментов)\nИспользует официальный MCP Python SDK",
  "functions": [
    {
      "name": "main",
      "docstring": "Главная функция для запуска MCP сервера",
      "line_range": [
        822,
        836
      ],
      "parameters": [],
      "decorators": []
    },
    {
      "name": "__init__",
      "docstring": "",
      "line_range": [
        71,
        105
      ],
      "parameters": [
        "self",
        "config"
      ],
      "decorators": []
    },
    {
      "name": "_setup_handlers",
      "docstring": "Настройка MCP handlers",
      "line_range": [
        107,
        614
      ],
      "parameters": [
        "self"
      ],
      "decorators": []
    },
    {
      "name": "_handle_struct_tool",
      "docstring": "Обработка struct_tools инструментов",
      "line_range": [
        616,
        769
      ],
      "parameters": [
        "self",
        "name",
        "arguments"
      ],
      "decorators": []
    },
    {
      "name": "run_stdio",
      "docstring": "Запуск MCP сервера в stdio режиме (для Cursor)",
      "line_range": [
        771,
        788
      ],
      "parameters": [
        "self"
      ],
      "decorators": []
    },
    {
      "name": "get_cursor_config",
      "docstring": "Генерирует конфигурацию для Cursor",
      "line_range": [
        790,
        802
      ],
      "parameters": [
        "self"
      ],
      "decorators": []
    },
    {
      "name": "get_vscode_config",
      "docstring": "Генерирует конфигурацию для VSCode",
      "line_range": [
        804,
        807
      ],
      "parameters": [
        "self"
      ],
      "decorators": []
    },
    {
      "name": "save_cursor_config",
      "docstring": "Сохраняет конфигурацию для Cursor",
      "line_range": [
        809,
        819
      ],
      "parameters": [
        "self",
        "config_path"
      ],
      "decorators": []
    },
    {
      "name": "handle_list_tools",
      "docstring": "Список доступных инструментов",
      "line_range": [
        111,
        388
      ],
      "parameters": [],
      "decorators": [
        "self.server.list_tools()"
      ]
    },
    {
      "name": "handle_call_tool",
      "docstring": "Обработка вызовов инструментов с автоматическим логированием",
      "line_range": [
        391,
        614
      ],
      "parameters": [
        "name",
        "arguments"
      ],
      "decorators": [
        "self.server.call_tool()"
      ]
    }
  ],
  "classes": [
    {
      "name": "MCPServer",
      "docstring": "MCP Server для универсального доступа к RAG системе + Struct Tools",
      "line_range": [
        68,
        819
      ],
      "methods": [
        {
          "name": "__init__",
          "docstring": "",
          "line_range": [
            71,
            105
          ],
          "parameters": [
            "self",
            "config"
          ]
        },
        {
          "name": "_setup_handlers",
          "docstring": "Настройка MCP handlers",
          "line_range": [
            107,
            614
          ],
          "parameters": [
            "self"
          ]
        },
        {
          "name": "_handle_struct_tool",
          "docstring": "Обработка struct_tools инструментов",
          "line_range": [
            616,
            769
          ],
          "parameters": [
            "self",
            "name",
            "arguments"
          ]
        },
        {
          "name": "run_stdio",
          "docstring": "Запуск MCP сервера в stdio режиме (для Cursor)",
          "line_range": [
            771,
            788
          ],
          "parameters": [
            "self"
          ]
        },
        {
          "name": "get_cursor_config",
          "docstring": "Генерирует конфигурацию для Cursor",
          "line_range": [
            790,
            802
          ],
          "parameters": [
            "self"
          ]
        },
        {
          "name": "get_vscode_config",
          "docstring": "Генерирует конфигурацию для VSCode",
          "line_range": [
            804,
            807
          ],
          "parameters": [
            "self"
          ]
        },
        {
          "name": "save_cursor_config",
          "docstring": "Сохраняет конфигурацию для Cursor",
          "line_range": [
            809,
            819
          ],
          "parameters": [
            "self",
            "config_path"
          ]
        }
      ],
      "bases": []
    }
  ],
  "callgraph": {
    "__init__": [
      "create_knowledge_extractor",
      "StructureConfig",
      "ImportError",
      "print",
      "Server",
      "RAGConfig",
      "create_cursor_intelligence",
      "PromptEnhancer",
      "create_discovery_system",
      "StructureAnalyzer",
      "Path",
      "self._setup_handlers",
      "create_session_context_manager"
    ],
    "_setup_handlers": [],
    "handle_list_tools": [
      "types.Tool",
      "tools.extend"
    ],
    "handle_call_tool": [
      "detect_and_log_model_context",
      "json.load",
      "types.TextContent",
      "suggestions_system.get_workflow_suggestions",
      "discovery_system.search_solutions",
      "cursor_intelligence._insight_to_dict",
      "session_context_manager.extract_session_context",
      "json.dumps",
      "arguments.get",
      "str",
      "cursor_intelligence.get_proactive_suggestions",
      "rules.append",
      "Path",
      "workflow_analysis.get",
      "round",
      "name.startswith",
      "datetime.now",
      "len",
      "time.time",
      "locals",
      "open",
      "auto_logger.log_tool_result",
      "self._handle_struct_tool",
      "extractor.extract_code_knowledge",
      "auto_logger.log_tool_call",
      "cursor_intelligence.analyze_workflow_context"
    ],
    "_handle_struct_tool": [
      "json.dumps",
      "arguments.get",
      "str",
      "result.update",
      "types.TextContent",
      "len"
    ],
    "run_stdio": [
      "print",
      "InitializationOptions",
      "NotificationOptions"
    ],
    "get_cursor_config": [],
    "get_vscode_config": [
      "self.get_cursor_config"
    ],
    "save_cursor_config": [
      "open",
      "Path.cwd",
      "json.dump",
      "print",
      "self.get_cursor_config"
    ],
    "main": [
      "MCPServer",
      "print",
      "server.save_cursor_config",
      "server.run_stdio"
    ]
  },
  "dependencies": [
    "Any",
    "Dict",
    "InitializationOptions",
    "List",
    "NotificationOptions",
    "Optional",
    "Path",
    "PromptEnhancer",
    "RAGConfig",
    "Server",
    "StructureAnalyzer",
    "StructureConfig",
    "asyncio",
    "auto_logger",
    "code_discovery",
    "config",
    "create_cursor_intelligence",
    "create_discovery_system",
    "create_knowledge_extractor",
    "create_session_context_manager",
    "cursor_intelligence",
    "datetime",
    "detect_and_log_model_context",
    "enhancer",
    "json",
    "knowledge_extractor",
    "mcp.server",
    "mcp.server.models",
    "mcp.server.stdio",
    "mcp.types",
    "pathlib",
    "session_context_manager",
    "struct_tools.structure_analyzer",
    "sys",
    "time",
    "typing"
  ],
  "hash": "f878d69e1759e3a3e2ae48e66ba2b5ea3aade210c4a4de59ac5b727e0684b207",
  "artifact_id": "c080ffca-a637-420a-a7b0-989aa661cda3"
}